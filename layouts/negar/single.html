{{ define "main" }}
<article class="negar-page" dir="rtl">
  <div class="negar-container">
    <!-- اسلایدر تصاویر -->
    <div class="negar-slider">
      <div class="slider-wrapper">
        <!-- اولین تصویر (ضروری) -->
        {{ if .Params.image }}
          <img src="{{ .Params.image }}" alt="{{ .Title }}" class="slide" style="display: block;">
        {{ end }}

        <!-- سایر تصاویر (اختیاری) -->
        {{ with .Params.images }}
          {{ range . }}
            <img src="{{ . }}" alt="{{ $.Title }}" class="slide" style="display: none;">
          {{ end }}
        {{ end }}

        <!-- پیام در صورت عدم وجود تصویر -->
        {{ if not (or .Params.image .Params.images) }}
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f0f0f0; color: #999;">
            بدون تصویر
          </div>
        {{ end }}

        <!-- === تغییر: دکمه‌ها به داخل slider-wrapper منتقل شدند === -->
        <!-- === تغییر: کلاس‌های slider-nav-btn اضافه شدند === -->
        <!-- فلش چپ (قبلی) -->
        <button class="slider-prev slider-nav-btn" aria-label="تصویر قبلی">❮</button>

        <!-- فلش راست (بعدی) -->
        <button class="slider-next slider-nav-btn" aria-label="تصویر بعدی">❯</button>
        <!-- ===================================================== -->
      
      </div> <!-- پایان slider-wrapper -->

      <!-- === تغییر: نقطه‌ها همچنان خارج از slider-wrapper هستند === -->
      <div class="slider-dots">
        {{ $total := add 1 (len (.Params.images | default slice)) }}
        {{ range seq $total }}
          <div class="slider-dot{{ if eq . 1 }} active{{ end }}"></div>
        {{ end }}
      </div>
      <!-- ========================================================== -->
    </div> <!-- پایان negar-slider -->

    <!-- بخش توضیحات -->
    <div class="negar-content">
      <h1 class="post-title">{{ .Title }}</h1>

      <div class="post-meta">
        <span class="post-date">{{ if .Params.persian_date }}{{ .Params.persian_date }}{{ else }}{{ .Date | time.Format ":date_long" }}{{ end }}</span>
        {{ with .Params.artist }}<span class="post-artist"> • هنرمند: {{ . }}</span>{{ end }}
      </div>

      <!-- توضیحات متنی -->
      <div class="post-description">
        {{ .Content }}
      </div>

      <!-- مشخصات فنی -->
      <div class="post-technical">
        {{ with .Params.medium }}<p><strong>تکنیک:</strong> {{ . }}</p>{{ end }}
        {{ with .Params.dimensions }}<p><strong>ابعاد:</strong> {{ . }}</p>{{ end }}
        {{ with .Params.year }}<p><strong>سال:</strong> {{ . }}</p>{{ end }}
      </div>
    </div>
  </div>
</article>

<!-- لود اسلایدر JS -->
<script src="{{ .Site.BaseURL }}js/slider.js" defer></script>
{{ end }}
